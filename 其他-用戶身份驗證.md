# 4. 其他
此章節會說明特定功能的設計.

## 4.1. 用戶身份驗證(登入、登出、API使用權限)

登入流程:
1. 前端呼叫登入API
2.
3.

### 4.1.1 前端呼叫登入API
前端呼叫登入API並且傳遞參數(帳號、密碼與權限層級).

傳遞的參數結構
```golang
type authLoginInput struct {
    // 權限層級
	UserRole int64 `json:"user_role" example:"5"`
	// 帳號
	Username string `json:"username" example:"admin"`
	// 密碼
	Password string `json:"password" example:"abc123456"`
}
```

HTTP API接口與 Swagger註釋
```golang
// AuthLogin 控管端登入
// @Summary 控管端登入
// @Description 登入取得session，並設定cookie
// @Tags Auth
// @Accept  json
// @Produce  json
// @Param  body  body  api.authLoginInput  true  "登入參數"
// @Success 200 {object} global.APIResponse "成功即可呼叫其他API"
// @Router /api/auth/login [post]
func AuthLogin(c *gin.Context) {
    var (
		res struct {
			Error  *zrpc.ErrorDetail `json:"error"`
			Result struct {
				UserID    int64  `json:"user_id"`
				Session   string `json:"session"`
				Username  string `json:"username"`
				ErrorCode string `json:"error_code"`
				ErrorText string `json:"error_text"`
			} `json:"result"`
        }
        req global.RPCRequest
    )
    
    req = global.RPCRequest{
			Service: "account",
			Method:  "Admin.Login",
			Params: map[string]interface{}{
				"username": input.Username,
				"password": input.Password,
				"login_ip": c.ClientIP(),
			},
		}
}
```


# 參考
